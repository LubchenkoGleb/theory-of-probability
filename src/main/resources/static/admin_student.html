<html>
<header>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="A visual introduction to probability and statistics.">
    <!-- Fonts -->
    <link rel="stylesheet" type="text/css"
          href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link href="https://fonts.googleapis.com/css?family=Assistant:300,400,600,700" rel="stylesheet">

    <!-- Home Page CSS -->
    <link rel="stylesheet" type="text/css" href="css/index.css">

    <!-- Full Page CSS -->
    <link rel="stylesheet" type="text/css" href="css/jquery.fullpage.css"/>

    <!--Jquery-->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>

    <!-- Full Page -->
    <script src="js/jquery.fullpage.js"></script>
</header>
<body>
<div class="menu-bottom">
    <ul id="menu">
        <li data-menuanchor="firstPage"  id='home'><a href="admin.html">Групи</a></li>
        <li data-menuanchor="secondPage" id="chapter-menu"><a href="admin_teacher.html">Викладачі</a></li>
        <li data-menuanchor="3rdPage" class="active"><a href="admin_student.html">Студенти</a></li>
        <li id="exit" style="margin-left: 500px;">Вихід</li>
    </ul>
</div>
<div class="section">
    <div class="teachers">
        <table id="studentsTable">
            <thead>
            <tr>
                <th>Id:</th>
                <th>Прізвище:</th>
                <th>Ім'я:</th>
                <th>Пошта:</th>
                <th>Статус:</th>
                <!--    <th>Видалення</th> -->
            </tr>
            </thead>
        </table>
    </div>
    <form id="inviteStudents" method="post">
        <h2>Надіслати лист підтвердження</h2>
        <p>
            <label>email: </label>
            <input name="email" type="text" id="inviteEmail" class="text"/>
        </p>
        <input type="submit" value="Надіслати" class="page"/>
    </form>
</div>
</body>
<script>
    var email = getRequestParam('email');
    $('#inviteStudents').submit(function (e) {
        e.preventDefault();
        var email = $("input#email").val();
        inviteStudents(email);
    });

    function inviteStudents(){
        $.ajax({
            type: "POST",
            url: "/admin/invite-students",
            async: false
        });
    };

    $.ajax({
        type: "GET",
        url: "/student/all",
        async: false,
        success: function (studentsRsponse) {
            console.log('students=' + JSON.stringify(studentsRsponse));
            var studentsMenu = document.getElementById('studentsTable');
            for (i = 0; i < studentsRsponse.length; i++) {
                var row = studentsMenu.insertRow(i + 1);
                var idCell = row.insertCell(0);
                idCell.innerHTML = studentsRsponse[i].id;
                var lastNameCell = row.insertCell(1);
                lastNameCell.innerHTML = studentsRsponse[i].lastName;
                var firstNameCell = row.insertCell(2);
                firstNameCell.innerHTML = studentsRsponse[i].firstName;
                var emailCell = row.insertCell(3);
                emailCell.innerHTML = studentsRsponse[i].email;
                var enableCell = row.insertCell(4);
                enableCell.innerHTML = studentsRsponse[i].enable;
            }
        }
    });

</script>
</html>